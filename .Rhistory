# Keagan Moo
# 2/28/2016
# Group Project
CrimeMap <- function(crime, choiceYear){
library(plotly)
library(dplyr)
# I need the input to be converted to the appropriate rate
# These two lines are test inputs to override user input.
#choiceYear = "2012"
#crime <- "Motor.vehicle.theft"
crime <- paste0(crime, ".rate")
# Load some of that data and cut out the crap
crimeData <- read.csv("./data/CrimeData.csv") %>% filter(Year == choiceYear, State != "Total")
# Find the column number my data lives at and give it a name I can grab at later.
Locate <- match(crime, colnames(crimeData))
crimeData$Choice <- crimeData[,Locate]
# Build some hover data that changes in response to the crime input.
crimeData$hover <- with(crimeData, paste0(State, '<br>', "Population: ", Population, '<br>', crime,": ", Choice))
# Get the colors in order, more negative ones so that out of the three graphs the user
# will instinctively associate this one with crime as opposed to income or economy.
borders <- list(color = toRGB("black"), width = 2)
gradientColor <- "Purples"
# Simple American Geography options
g <- list(
scope = 'usa',
projection = list(type = 'albers usa')
)
# Now lets build this
plot_ly(crimeData, z = crimeData[,Locate], text = hover, locations = Code, type = "choropleth",
locationmode = 'USA-states', color = crimeData[,Locate], colors = "Reds",
marker = list(line = borders), colorbar = list(title = "Per Capita")) %>%
layout(title = "United State Department of Justice Crime Data", geo = g) %>%
# Keagan Moo
# 2/28/2016
# Group Project
CrimeMap <- function(crime, choiceYear){
library(plotly)
library(dplyr)
# I need the input to be converted to the appropriate rate
# These two lines are test inputs to override user input.
#choiceYear = "2012"
#crime <- "Motor.vehicle.theft"
crime <- paste0(crime, ".rate")
# Load some of that data and cut out the crap
crimeData <- read.csv("./data/CrimeData.csv") %>% filter(Year == choiceYear, State != "Total")
# Find the column number my data lives at and give it a name I can grab at later.
Locate <- match(crime, colnames(crimeData))
crimeData$Choice <- crimeData[,Locate]
# Build some hover data that changes in response to the crime input.
crimeData$hover <- with(crimeData, paste0(State, '<br>', "Population: ", Population, '<br>', crime,": ", Choice))
# Get the colors in order, more negative ones so that out of the three graphs the user
# will instinctively associate this one with crime as opposed to income or economy.
borders <- list(color = toRGB("black"), width = 2)
gradientColor <- "Purples"
# Simple American Geography options
g <- list(
scope = 'usa',
projection = list(type = 'albers usa')
)
# Now lets build this
plot_ly(crimeData, z = crimeData[,Locate], text = hover, locations = Code, type = "choropleth",
locationmode = 'USA-states', color = crimeData[,Locate], colors = "Reds",
marker = list(line = borders), colorbar = list(title = "Per Capita")) %>%
layout(title = "United State Department of Justice Crime Data", geo = g) %>%
return()
}
CrimeMap("Burglary", 1996)
setwd("F:/Saved Content/UW/Winter 2016/INFO 498F/Group-Project/scripts")
CrimeMap("Burglary", 1996)
setwd("F:/Saved Content/UW/Winter 2016/INFO 498F/Group-Project")
CrimeMap("Burglary", 1996)
CrimeMap('Violent.crime.total', 1998)
CrimeMap('Violent.crime.total', 1998)
CrimeMap('Violent\.crime\.total', 1998)
CrimeMap('Violent\\.crime\\.total', 1998)
CrimeMap('Robbery', 1998)
#Rosemary Adams
#Last Edit: 03.01.2016
#Creating single choropleth map of 2010 education data
# install.packages("plotly")
require(plotly)
require(dplyr)
df <- read.csv("./data/EducationData.csv")
#year options: even years between 1992 and 2010, formatted like "x2010" or "x1996"
EducationMap <- function(year) {
require(plotly)
require(dplyr)
df <- read.csv("./data/EducationData.csv")
#give state boundaries a white border
l <- list(color = toRGB("white"), width = 2)
# specify some map projection/options
g <- list(
scope = 'usa',
projection = list(type = 'albers usa'),
showlakes = TRUE,
lakecolor = toRGB('white')
)
plot_ly(df, z = year, locations = code, type = 'choropleth',
locationmode = 'USA-states', color = year, colors = 'Purples',
marker = list(line = l), colorbar = list(title = "Percent of College Attendance")) %>%
layout(title = 'Percent of High School Graduates who Attend College', geo = g)
}
EducationMap(1992)
View(df)
EducationMap('x1992')
